<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
  <title>장바구니</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="css/sub.css">
</head>
<body>
    <header id="header">
        <h1 class="logo"><a href="index.html"><img src="images/logo.gif" alt="LOGO"></a></h1>
        <nav>
        <ul class="gnb">
            <li class="menu_open"><a href="#none"><span class="material-symbols-rounded">dashboard</span></a></li>
            <li class="search_open"><a href="#none"><span class="material-symbols-rounded">search</span></a></li>
            <li><a href="index.html"><span class="material-symbols-sharp">other_houses</span></a></li>
            <li><a href="shopping.html"><span class="material-symbols-rounded">local_mall</span></a></li>
            <li><a href="login.html"><span class="material-symbols-sharp">person</span></a></li>
        </ul>
        </nav>
        <div class="menu_wrap">
            <div class="close"><span class="material-symbols-outlined">close</span></div>
            <div class="menu">
                <ul>
                    <li>
                        <span>01</span>
                        <a href="new.html">New Product</a>
                    </li>
                    <li>
                        <span>02</span>
                        <a href="best.html">Best Product</a>
                    </li>
                    <li class="depth_wrap">
                        <span>03</span>
                        <a href="diffuser.html">Diffuser</a>
                    </li>
                    <li>
                        <span>04</span>
                        <a href="notice.html">Notice</a>
                    </li>
                    <li>
                        <span>05</span>
                        <a href="faq.html">FAQ</a>
                    </li>
                    <li>
                        <span>06</span>
                        <a href="buy.html">구매 페이지</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="search_wrap">
            <div class="close"><span class="material-symbols-outlined">close</span></div>
            <form>
                <input type="search">
                <button><span class="material-symbols-rounded">search</span></button>
            </form>
            <div class="link_wrap">
                <a href="#none">#차량용</a>
                <a href="#none">#선물세트 / 포장</a>
                <a href="#none">#디퓨저 리필</a>
                <a href="#none">#포장 / 카드</a>
                <a href="#none">#액세서리</a>
            </div>
        </div>
    </header>

    <section id="shopping">
        <div class="product_wrap">
            <div class="all_select">
                <label>
                    <input type="checkbox" class="all_selectChk">
                    <span class="indent">체크박스 이미지</span>
                    <span>전체 선택</span>
                </label>
            </div>
            <div class="selectChk">
                <label>
                    <input type="checkbox" class="select" name="item" value="36900">
                    <span class="indent">체크박스 이미지</span>
                </label>
                <div class="product_box clear">
                    <div class="product_thumbs">
                        <div class="product_img"><a href="#none"><img src="images/thumb11.png" alt="썸네일"></a></div>
                        <div class="product_info">
                            <a href="#none">
                                <p class="info_name">비비엔느 블랙스톤 몬스테라 대리석 받침 선물 세트</p>
                                <p class="info_price"><span></span><span></span></p>
                            </a>
                        </div>
                    </div>
                    <div class="product_select">향 선택 : 러브 인 화이트 / 1개</div>
                    <div class="product_price">
                        <p>상품금액</p>
                        <p class="price"></p>
                    </div>
                    <div class="delivery">
                        <p>배송비</p>
                        <p>무료</p>
                    </div>
                    <div class="order_btn">
                        <a href="#none" class="del">삭제</a>
                        <a href="#none">주문수정</a>
                        <a href="#none">주문하기</a>
                    </div>
                </div>
            </div>
            <div class="selectChk">
                <label>
                    <input type="checkbox" class="select" name="item" value="59900">
                    <span class="indent">체크박스 이미지</span>
                </label>
                <div class="product_box clear">
                    <div class="product_thumbs">
                        <div class="product_img"><a href="#none"><img src="images/thumb11.png" alt="썸네일"></a></div>
                        <div class="product_info">
                            <a href="#none">
                                <p class="info_name">비비엔느 블랙스톤 몬스테라 대리석 받침 선물 세트</p>
                                <p class="info_price"><span></span><span></span></p>
                            </a>
                        </div>
                    </div>
                    <div class="product_select">향 선택 : 러브 인 화이트 / 1개</div>
                    <div class="product_price">
                        <p>상품금액</p>
                        <p class="price"></p>
                    </div>
                    <div class="delivery">
                        <p>배송비</p>
                        <p>무료</p>
                    </div>
                    <div class="order_btn">
                        <a href="#none" class="del">삭제</a>
                        <a href="#none">주문수정</a>
                        <a href="#none">주문하기</a>
                    </div>
                </div>
            </div>
            <div class="selectChk">
                <label>
                    <input type="checkbox" class="select" name="item" value="71700">
                    <span class="indent">체크박스 이미지</span>
                </label>
                <div class="product_box clear">
                    <div class="product_thumbs">
                        <div class="product_img"><a href="#none"><img src="images/thumb11.png" alt="썸네일"></a></div>
                        <div class="product_info">
                            <a href="#none">
                                <p class="info_name">비비엔느 블랙스톤 몬스테라 대리석 받침 선물 세트</p>
                                <p class="info_price"><span></span><span></span></p>
                            </a>
                        </div>
                    </div>
                    <div class="product_select">향 선택 : 러브 인 화이트 / 1개</div>
                    <div class="product_price">
                        <p>상품금액</p>
                        <p class="price"></p>
                    </div>
                    <div class="delivery">
                        <p>배송비</p>
                        <p>무료</p>
                    </div>
                    <div class="order_btn">
                        <a href="#none" class="del">삭제</a>
                        <a href="#none">주문수정</a>
                        <a href="#none">주문하기</a>
                    </div>
                </div>
            </div>
            <div class="total_price">
                <p class="chkPrice">선택상품금액 <span>0원</span></p>
                <p>총 배송비 <span>0원</span></p>
                <p>할인예상금액 <span>0원</span></p>
                <p>주문금액 <span>0원</span></p>
            </div>
            <a href="#none" class="order">비비엔느 <span class="total">0</span>건 주문하기</a>
        </div>
    </section>

    <footer id="footer">
        <h2 class="ft_title">customer center</h2>
        <div class="ft_customer">
            <table>
                <tr>
                    <td>평일</td>
                    <td>09:00 ~ 18:00</td>
                </tr>
                <tr>
                    <td>점심시간</td>
                    <td>12:00 ~ 13:00</td>
                </tr>
                <tr>
                    <td>주말/공휴일</td>
                    <td>휴무</td>
                </tr>
                <tr>
                    <td>연락처</td>
                    <td>Tel.02-830-5523</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Fax.02-2023-8636</td>
                </tr>
            </table>
        </div>
        <div class="ft_bank"><p>우리은행 1005-882-235678 (주)비비엔느</p></div>
        <div class="ft_info">
            <ul>
                <li><a href="#none">이용약관</a></li>
                <li><a href="#none">개인정보취급방침</a></li>
                <li class="ft_show">
                    <a href="#none">사업자정보
                    <span class="material-symbols-rounded">expand_more</span>
                    </a>
                </li>
            </ul>
            <div class="ft_business">
                <p>법인명(상호) : 주식회사 비비엔느</p>
                <p>주소 : 153759 서울특별시 금천구 <br> 가산디지털2로 123 월드메르디앙2차 406호</p>
                <p>사업자 등록번호 안내 : 119-86-09571</p>
                <p>통신판매업 신고 2014-서울금천-0624</p>
                <a href="javascript:alert('준비 중입니다.');">[사업자정보확인]</a>
                <p>대표자(성명) : 이경하</p>
                <p>개인정보관리책임자 : 민기수(help@vivienne.kr)</p>
            </div>
        </div>
    </footer>

<script src="js/jquery-3.6.3.min.js"></script>
<script src="js/jquery-ui-1.10.4.custom.min.js"></script>
<script src="js/prefixfree.min.js"></script>
<script src="js/style.js"></script>
<script>
    const chkList = $("input[name=item]");
    const length = chkList.length;

    $(".selectChk").each(function(){
        let inputVal = $(this).find("input[name=item]").val();
        let valNum = parseInt(inputVal);
        let persent = parseInt(inputVal) + parseInt(inputVal * 5/100);

        $(this).find(".info_price span:first-child").text(valNum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인 후 금액
        $(this).find(".info_price span:last-child").text(persent.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인 전 금액
        $(this).find(".price").text(valNum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//상품금액
    })

    $(".all_selectChk").on("click",function(){
        if($(this).is(":checked")){
            chkList.prop("checked",true);
            
            const allLength = $("#shopping input[name=item]:checked").length;
            $("#shopping .total").text(allLength); 
        } else {
            chkList.prop("checked",false);
            $("#shopping .total").text(0); 
        };

        //체크박스 금액 더하기
        let sum = 0;
        let per = 0;
        let per2 = 0;
        $('#shopping input[name=item]').each(function(){
            const val = $(this).val();//체크된 체크박스 값
            const num = parseInt(val);//그 값을 정수로 변환
            const noDc = parseInt(val) + parseInt(val * 5/100);//할인 전 금액
            const dc = parseInt(val * 5/100);//할인율

            if($(this).is(':checked') == true){//체크박스 체크됐을 때
                per = per + noDc;
                per2 = per2 + dc;
                sum = sum + num;
                
                $("#shopping .total_price p:nth-child(1) span").text(per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//선택상품금액
                $("#shopping .total_price p:nth-child(3) span").text(per2.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인예상금액
                $("#shopping .total_price p:nth-child(4) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//주문금액
            } else {
                $("#shopping .total_price p:nth-child(1) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//선택상품금액
                $("#shopping .total_price p:nth-child(3) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인예상금액
                $("#shopping .total_price p:nth-child(4) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//주문금액
            };
        }); 
    });
    $(".selectChk input[name=item]").on('click',function(){
        const allLength = $("input[name=item]:checked").length;
        const length = $("input[name=item]").length;

        $("#shopping .total").text(allLength);

        //개별 선택 시 전체 선택 해제
        if(allLength != length){
            $("#shopping .all_selectChk").prop('checked',false);
        } else {
            $("#shopping .all_selectChk").prop('checked',true);
        };

        //체크박스 금액 더하기
        let sum = 0;
        let per = 0;
        let per2 = 0;
        $('#shopping input[name=item]').each(function(){
            const val = $(this).val();//체크된 체크박스 값
            const num = parseInt(val);//그 값을 정수로 변환
            const noDc = parseInt(val) + parseInt(val * 5/100);//할인 전 금액
            const dc = parseInt(val * 5/100);//할인율

            if($(this).is(':checked') == true){//체크박스 체크됐을 때
                per = per + noDc;
                per2 = per2 + dc;
                sum = sum + num;

                $("#shopping .total_price p:nth-child(1) span").text(per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//선택상품금액
                $("#shopping .total_price p:nth-child(3) span").text(per2.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인예상금액
                $("#shopping .total_price p:nth-child(4) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//주문금액
            } else {
                $("#shopping .total_price p:nth-child(1) span").text(per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//선택상품금액
                $("#shopping .total_price p:nth-child(3) span").text(per2.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인예상금액
                $("#shopping .total_price p:nth-child(4) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//주문금액
            };
        }); 
    });
    $("#shopping .order_btn .del").on('click',function(){
        //삭제 버튼
        $(this).parents(".selectChk").detach();

        let sum = 0;
        let per = 0;
        let per2 = 0;
        $('#shopping input[name=item]').each(function(){
            const val = $(this).val();//체크된 체크박스 값
            const num = parseInt(val);//그 값을 정수로 변환
            const noDc = parseInt(val) + parseInt(val * 5/100);//할인 전 금액
            const dc = parseInt(val * 5/100);//할인율


            if($(this).is(':checked') == true){
                per = per + noDc;
                per2 = per2 + dc;
                sum = sum + num;

                $("#shopping .total_price p:nth-child(1) span").text(per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//선택상품금액
                $("#shopping .total_price p:nth-child(3) span").text(per2.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인예상금액
                $("#shopping .total_price p:nth-child(4) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//주문금액
            } else if($(this).is(":checked") == false){
                $("#shopping .total_price p:nth-child(1) span").text(per.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//선택상품금액
                $("#shopping .total_price p:nth-child(3) span").text(per2.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//할인예상금액
                $("#shopping .total_price p:nth-child(4) span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");//주문금액
            }
        });
        const allLength = $("#shopping input[name=item]:checked").length;
        const length = $("#shopping input[name=item]").length;

        $("#shopping .total").text(allLength);

        if(length == 0){
            $("#shopping .chkPrice span").text(sum.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원");
            $("#shopping .all_select .all_selectChk").prop("checked", false);
            $("#shopping .all_select .all_selectChk").attr("disabled", true);
        };
    });
</script>
</body>
</html>